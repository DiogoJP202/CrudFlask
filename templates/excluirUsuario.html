<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="utf-8">
	<title>Excluir Usu√°rio</title>
	<style>
		:root {
			--primary-color: #00a4a4;
			--primary-hover: #00d2d2;
			--danger-color: #d33;
			--danger-hover: #f44;
			--bg-color: #f4f8f9;
			--card-bg: #ffffff;
			--text-color: #333;
			--shadow: 0 4px 10px rgba(0,0,0,0.1);
		}

		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		body {
			font-family: "Segoe UI", Roboto, Arial, sans-serif;
			background-color: var(--bg-color);
			color: var(--text-color);
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			min-height: 100vh;
		}

		h1 {
			text-align: center;
			color: var(--danger-color);
			margin-bottom: 1.5rem;
			font-weight: 600;
			letter-spacing: 0.5px;
		}

		.container {
			background: var(--card-bg);
			box-shadow: var(--shadow);
			border-radius: 12px;
			padding: 2rem 2.5rem;
			width: 100%;
			max-width: 480px;
			text-align: center;
		}

		form {
			display: flex;
			flex-direction: column;
			gap: 1rem;
			text-align: left;
		}

		label {
			font-weight: 500;
			color: #444;
		}

		input {
			width: 100%;
			padding: 0.6rem 0.8rem;
			border: 1px solid #ccc;
			border-radius: 6px;
			transition: border-color 0.2s ease, box-shadow 0.2s ease;
		}

		input:focus {
			border-color: var(--danger-color);
			outline: none;
			box-shadow: 0 0 5px rgba(211,51,51,0.3);
		}

		button {
			margin-top: 0.5rem;
			padding: 0.75rem;
			background: var(--danger-color);
			color: white;
			border: none;
			border-radius: 8px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.2s ease;
		}

		button:hover {
			background: var(--danger-hover);
			transform: translateY(-1px);
			box-shadow: var(--shadow);
		}

		#mensagem {
			margin-top: 1rem;
			font-weight: 600;
			color: var(--danger-color);
			min-height: 1.25rem;
			text-align: center;
		}

		.actions {
			display: flex;
			flex-wrap: wrap;
			gap: 0.5rem;
			justify-content: center;
			margin-bottom: 1.5rem;
		}

		.actions a {
			text-decoration: none;
			color: var(--primary-color);
			background: #e8f7f7;
			padding: 0.5rem 0.8rem;
			border-radius: 6px;
			font-weight: 500;
			transition: all 0.2s ease;
		}

		.actions a:hover {
			background: var(--primary-hover);
			color: white;
			transform: translateY(-1px);
			box-shadow: var(--shadow);
		}

		footer {
			margin-top: 2rem;
			font-size: 0.85rem;
			color: #888;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>üóëÔ∏è Excluir Usu√°rio</h1>

		<div class="actions">
			<a href="/">üè† In√≠cio</a>
			<a href="/criarUsuarios">üë§ Criar</a>
			<a href="/verUsuarios">üìã Listar</a>
			<a href="/procurarUsuario">üîç Procurar</a>
			<a href="/atualizarUsuario">‚úèÔ∏è Atualizar</a>
		</div>

		<form id="formExcluir">
			<label for="idUsuario">ID do Usu√°rio</label>
			<input type="number" id="idUsuario" name="idUsuario" placeholder="Digite o ID do usu√°rio" required>

			<button type="submit">Excluir Usu√°rio</button>
		</form>

		<div id="mensagem" role="status" aria-live="polite"></div>
	</div>

	<footer>Flask CRUD ‚Ä¢ Exclus√£o de registros</footer>

	<script>
	(function(){
		const form = document.getElementById('formExcluir');
		const msg = document.getElementById('mensagem');

		form.addEventListener('submit', async (e) => {
			e.preventDefault();
			msg.textContent = '';

			const IdUsuario = document.getElementById('idUsuario').value.trim();

			if(!IdUsuario){
				msg.textContent = '‚ö†Ô∏è Preencha o campo ID de Usu√°rio!';
				return;
			}

			try {
				const usuario = await fetch(`/users/${IdUsuario}`);

				if(usuario.ok){
					const usuarioJson = await usuario.json();
					const confirmar = confirm(`Voc√™ tem certeza que deseja excluir:\n\n${usuarioJson.nome} (${usuarioJson.email}) ?`);

					if(!confirmar) return;

					const response = await fetch(`/users/${usuarioJson.id}`, {
						method: 'DELETE',
						headers: { 'Content-Type': 'application/json' }
					});

					if(response.ok){
						msg.textContent = '‚úÖ Usu√°rio exclu√≠do com sucesso!';
						form.reset();
					} else {
						msg.textContent = `Erro ${response.status}: n√£o foi poss√≠vel excluir.`;
					}
				} else {
					alert('Usu√°rio n√£o encontrado.');
					msg.textContent = '‚ùå Usu√°rio n√£o encontrado.';
				}
			} catch(err){
				console.error(err);
				msg.textContent = '‚ùå Erro de rede: ' + (err.message || err);
			}
		});
	})();
	</script>
</body>
</html>
