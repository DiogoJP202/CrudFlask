<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="utf-8">
	<title>Atualizar Usu√°rio</title>
	<style>
		:root {
			--primary-color: #00a4a4;
			--primary-hover: #00d2d2;
			--bg-color: #f4f8f9;
			--card-bg: #ffffff;
			--text-color: #333;
			--shadow: 0 4px 10px rgba(0,0,0,0.1);
		}

		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		body {
			font-family: "Segoe UI", Roboto, Arial, sans-serif;
			background-color: var(--bg-color);
			color: var(--text-color);
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			min-height: 100vh;
		}

		h1 {
			text-align: center;
			color: var(--primary-color);
			margin-bottom: 1.5rem;
			font-weight: 600;
			letter-spacing: 0.5px;
		}

		.container {
			background: var(--card-bg);
			box-shadow: var(--shadow);
			border-radius: 12px;
			padding: 2rem 2.5rem;
			width: 100%;
			max-width: 480px;
			text-align: center;
		}

		form {
			display: flex;
			flex-direction: column;
			gap: 1rem;
			text-align: left;
		}

		label {
			font-weight: 500;
			color: #444;
		}

		input {
			width: 100%;
			padding: 0.6rem 0.8rem;
			border: 1px solid #ccc;
			border-radius: 6px;
			transition: border-color 0.2s ease, box-shadow 0.2s ease;
		}

		input:focus {
			border-color: var(--primary-color);
			outline: none;
			box-shadow: 0 0 5px rgba(0,164,164,0.3);
		}

		button {
			margin-top: 0.5rem;
			padding: 0.75rem;
			background: var(--primary-color);
			color: white;
			border: none;
			border-radius: 8px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.2s ease;
		}

		button:hover {
			background: var(--primary-hover);
			transform: translateY(-1px);
			box-shadow: var(--shadow);
		}

		#mensagem {
			margin-top: 1rem;
			font-weight: 600;
			color: var(--primary-color);
			min-height: 1.25rem;
			text-align: center;
		}

		.actions {
			display: flex;
			flex-wrap: wrap;
			gap: 0.5rem;
			justify-content: center;
			margin-bottom: 1.5rem;
		}

		.actions a {
			text-decoration: none;
			color: var(--primary-color);
			background: #e8f7f7;
			padding: 0.5rem 0.8rem;
			border-radius: 6px;
			font-weight: 500;
			transition: all 0.2s ease;
		}

		.actions a:hover {
			background: var(--primary-hover);
			color: white;
			transform: translateY(-1px);
			box-shadow: var(--shadow);
		}

		footer {
			margin-top: 2rem;
			font-size: 0.85rem;
			color: #888;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>‚úèÔ∏è Atualizar Usu√°rio</h1>

		<div class="actions">
			<a href="/">üè† In√≠cio</a>
			<a href="/criarUsuarios">üë§ Criar</a>
			<a href="/verUsuarios">üìã Listar</a>
			<a href="/procurarUsuario">üîç Procurar</a>
			<a href="/excluirUsuario">üóëÔ∏è Excluir</a>
		</div>

		<form id="updateForm">
			<label for="idUsuario">ID do Usu√°rio</label>
			<input type="number" id="idUsuario" name="idUsuario" placeholder="Digite o ID" required>

			<label for="nome">Nome</label>
			<input type="text" id="nome" name="nome" placeholder="Novo nome" required>

			<label for="email">Email</label>
			<input type="email" id="email" name="email" placeholder="novoemail@dominio.com" required>

			<button type="submit">Salvar Altera√ß√µes</button>
		</form>

		<div id="mensagem" role="status" aria-live="polite"></div>
	</div>

	<footer>Flask CRUD ‚Ä¢ Atualizar registros</footer>

	<script>
	(function(){
		const form = document.getElementById('updateForm');
		const msg = document.getElementById('mensagem');

		form.addEventListener('submit', async (e) => {
			e.preventDefault();
			msg.textContent = '';

			const id = document.getElementById('idUsuario').value.trim();
			const nome = document.getElementById('nome').value.trim();
			const email = document.getElementById('email').value.trim();

			if(!id || !nome || !email){
				msg.textContent = '‚ö†Ô∏è Preencha ID, nome e email.';
				return;
			}

			try{
				const res = await fetch(`/users/${id}`, {
					method: 'PUT',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({ nome, email })
				});

				const data = await res.json().catch(() => ({}));

				if(res.ok){
					msg.textContent = data.Message || '‚úÖ Usu√°rio atualizado com sucesso!';
					form.reset();
				} else {
					msg.textContent = data.Error || JSON.stringify(data) || ('Erro: ' + res.status);
				}
			} catch(err){
				msg.textContent = '‚ùå Erro de rede: ' + (err.message || err);
			}
		});
	})();
	</script>
</body>
</html>
